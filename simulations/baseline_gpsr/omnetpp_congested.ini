#
# Congested Baseline GPSR Configuration
# 
# Tests standard GPSR under congested conditions to identify
# scenarios where delay-aware tiebreakers would be beneficial
#

[Config CongestedBaseline]
description = "Baseline GPSR under congested conditions with cross-traffic"
network = BaselineNetwork

# General settings
sim-time-limit = 300s
result-dir = ../../results/congested_baseline

# Random number generation
num-rngs = 3
repeat = 1
**.mobility.rng-0 = 1
**.wlan[*].mac.rng-0 = 2

# Network size
*.numHosts = 20

# Force single wireless interface
*.host[*].numWlanInterfaces = 1
*.host[*].wlan[0].typename = "AckingWirelessInterface"

# UnitDisk radio for deterministic connectivity
# CONGESTED: 50% of baseline bitrate
*.host[*].wlan[*].bitrate = 1Mbps
*.host[*].wlan[*].mac.headerLength = 23B
*.host[*].wlan[*].radio.typename = "UnitDiskRadio"
*.host[*].wlan[*].radio.transmitter.headerLength = 96b
*.host[*].wlan[*].radio.transmitter.communicationRange = 300m
*.host[*].wlan[*].radio.transmitter.interferenceRange = 0m
*.host[*].wlan[*].radio.transmitter.detectionRange = 0m
*.host[*].wlan[*].radio.receiver.ignoreInterference = true

# Mobility constraints
*.host[*].mobility.constraintAreaMinX = 0m
*.host[*].mobility.constraintAreaMinY = 0m
*.host[*].mobility.constraintAreaMaxX = 1000m
*.host[*].mobility.constraintAreaMaxY = 1000m
*.host[*].mobility.constraintAreaMinZ = 0m
*.host[*].mobility.constraintAreaMaxZ = 0m
*.host[*].mobility.typename = "StationaryMobility"
*.host[*].mobility.initFromDisplayString = false

# Grid positioning: 5x4 grid, 250m spacing
# Row 0 (y=0)
*.host[0].mobility.initialX = 0m
*.host[0].mobility.initialY = 0m
*.host[1].mobility.initialX = 250m
*.host[1].mobility.initialY = 0m
*.host[2].mobility.initialX = 500m
*.host[2].mobility.initialY = 0m
*.host[3].mobility.initialX = 750m
*.host[3].mobility.initialY = 0m
*.host[4].mobility.initialX = 1000m
*.host[4].mobility.initialY = 0m

# Row 1 (y=250m)
*.host[5].mobility.initialX = 0m
*.host[5].mobility.initialY = 250m
*.host[6].mobility.initialX = 250m
*.host[6].mobility.initialY = 250m
*.host[7].mobility.initialX = 500m
*.host[7].mobility.initialY = 250m
*.host[8].mobility.initialX = 750m
*.host[8].mobility.initialY = 250m
*.host[9].mobility.initialX = 1000m
*.host[9].mobility.initialY = 250m

# Row 2 (y=500m)
*.host[10].mobility.initialX = 0m
*.host[10].mobility.initialY = 500m
*.host[11].mobility.initialX = 250m
*.host[11].mobility.initialY = 500m
*.host[12].mobility.initialX = 500m
*.host[12].mobility.initialY = 500m
*.host[13].mobility.initialX = 750m
*.host[13].mobility.initialY = 500m
*.host[14].mobility.initialX = 1000m
*.host[14].mobility.initialY = 500m

# Row 3 (y=750m)
*.host[15].mobility.initialX = 0m
*.host[15].mobility.initialY = 750m
*.host[16].mobility.initialX = 250m
*.host[16].mobility.initialY = 750m
*.host[17].mobility.initialX = 500m
*.host[17].mobility.initialY = 750m
*.host[18].mobility.initialX = 750m
*.host[18].mobility.initialY = 750m
*.host[19].mobility.initialX = 1000m
*.host[19].mobility.initialY = 750m

# IPv4 network configuration - auto-assign addresses
*.configurator.addStaticRoutes = false
*.configurator.addDefaultRoutes = false
*.configurator.addSubnetRoutes = false

# GPSR routing configuration
*.host[*].forwarding = true
*.host[*].ipv4.arp.typename = "GlobalArp"
*.host[*].routing.typename = "Gpsr"
*.host[*].routing.interfaces = "wlan0"
*.host[*].routing.beaconInterval = 10s
*.host[*].routing.maxJitter = 5s
*.host[*].routing.neighborValidityInterval = 30s
*.host[*].routing.displayBubbles = false

# Traffic configuration - UdpBasicApp
# CONGESTED: 2x packet size, 2x rate
*.host[*].numApps = 1
*.host[*].app[0].typename = "UdpBasicApp"
*.host[*].app[0].destPort = 5000
*.host[*].app[0].messageLength = 1024B  # 2x baseline (512B)
*.host[*].app[0].sendInterval = exponential(0.5s)  # 2x rate (1.0s)
*.host[*].app[0].startTime = uniform(0s, 5s)
*.host[*].app[0].stopTime = -1s

# Cross-traffic pattern: opposite corners creating center congestion
# Flow 1: host[0] (0,0) → host[19] (1000,750) - traverse center diagonally
# Flow 2: host[4] (1000,0) → host[15] (0,750) - traverse center diagonally
*.host[0].app[0].destAddresses = "10.0.0.20"  # host[19]
*.host[4].app[0].destAddresses = "10.0.0.16"  # host[15]

# All other hosts inactive (no destinations configured)
*.host[1..3].app[0].destAddresses = ""
*.host[5..14].app[0].destAddresses = ""
*.host[16..19].app[0].destAddresses = ""

# UDP sinks on destination hosts
*.host[15].numApps = 1
*.host[15].app[0].typename = "UdpSink"
*.host[15].app[0].localPort = 5000

*.host[19].numApps = 1
*.host[19].app[0].typename = "UdpSink"
*.host[19].app[0].localPort = 5000
